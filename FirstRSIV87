//@version=3
study(title="First_RSI", shorttitle="First_RSI", overlay=false)
src = input(close, type=source, title="Source")

// Input
lineaRSI = input(14, title="RSI")
ema_C = input(9, title="EMA Corta")
ema_L = input(200, title="emaL")
lineaWMA = input(45, title="VWMA")
rsi = rsi(src, lineaRSI)
emaC = wma(rsi, ema_C)
emaL = ema(rsi, ema_L)
wma = wma(rsi, lineaWMA)

// Limites RSI
//up = input(false, 65, title="Upper")
//dn = input(false, 45, title="Lower")
//u=hline(up)
//d=hline(dn)
//fill(u,d, color=purple, transp=95)

// Lineas
plot(rsi, color=green, linewidth=2, title="RSI", transp=0)
plot(emaC, color=red, linewidth=2, title="emaC", transp=0)
plot(emaL, color=purple, linewidth=2, title="emaL", transp=0)
plot(wma, color=orange, linewidth=2, title="WMA", transp=0)

// Fondos
bgcolor(emaL < rsi? green : na, transp=70)
bgcolor(emaL > rsi? red : na, transp=70)
//bgcolor(emaL > wma and (wma > emaC) and (emaC > rsi)? red : na, transp=70)
//bgcolor(wma > emaC and (emaC > rsi) and (emaL > rsi)? red : na, transp=70)
//bgcolor(emaC > rsi and (wma > emaL) ? yellow : na, transp=70)
//bgcolor(emaC > rsi and (rsi > emaL) and (emaL > wma) ? black : na, transp=70)
//bgcolor(rsi > emaC and (emaC > emaL) and (emaL > wma) ? black : na, transp=70)
//bgcolor(emaC > emaL and (emaL > rsi) and (rsi > wma) ? black : na, transp=70)
//bgcolor(emaL > wma and (wma > rsi) and (rsi > emaC) ? black : na, transp=70)
//bgcolor(rsi > emaL and (emaL > wma) and (wma > emaC) ? black : na, transp=70)
//bgcolor(wma > emaL and (emaL > rsi) and (rsi > emaC) ? black : na, transp=70)
//bgcolor(rsi > wma and (wma > emaL) and (emaL > emaC) ? green : na, transp=70)
//bgcolor(wma > rsi and (rsi > emaL) and (emaL > emaC) ? black : na, transp=70)
//bgcolor(rsi > wma and (wma > emaC) and (emaC > emaL) ? green : na, transp=70)
//bgcolor(wma > rsi and (rsi > emaC) and (emaC > emaL) ? black : na, transp=70)

// Cruce
rcrossUP=crossover(rsi, emaC)
rcrossDN = crossunder(rsi, emaC)
rcrosswmaDN = crossunder(emaC, wma)

//plotchar(rcrossUP, title="Buy_1", char='C', location=location.bottom, color=black, transp=0, offset=0,size=size.tiny)
plotshape(rcrossUP, style=shape.triangleup, location=location.top, color=green, size=size.small, title="Compra_RSI")
plotshape(rcrossDN, style=shape.xcross, location=location.top, color=red, size=size.small, title="Cierre1_RSI")
plotshape(rcrosswmaDN, style=shape.diamond, location=location.top, color=orange, size=size.small, title="Cierre2_RSI")

//plotchar(rsi > wma and (wma > emaL) and (emaL > emaC), title="Buy_2", char='Up', location=location.bottom, color=black, transp=0, offset=0,size=size.tiny)
